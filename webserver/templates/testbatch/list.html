
{% extends "layout.html" %}
{% block content %}
<script type="text/javascript">
    $(function() {
        $(document).puitooltip();
        $('#testbatchlist').puidatagrid({
            paginator: {
                rows: 9
            },
            header: 'Test Batchs',
            datasource: [
                {% for tb in data['testbatch_list'] %}
                    {
                        'id': '{{ tb.id }}',
                        'starting_timestamp': '{{ tb.starting_timestamp }}',
                        'ending_timestamp': {% if tb.ending_timestamp is none %}'is running...' {% else %}'{{ tb.ending_timestamp }}' {% endif %}
                    },
                {% endfor %}
            ],
            content: function(data) {
                return $(
                            '<div>' +
                                '<div>' +
                                    '<h3 class="text-center"><button class="btn btn-link" onclick="location.href=\'/tb/detail/' + data.id + '\'">Test batch id: ' + data.id + '</button></h3>' +
                                '</div>' +
                                '<div>' +
                                    '<h5>' + data.starting_timestamp + '</h5>' +
                                '</div>' +
                                '<div>' +
                                    '<h5>' + data.ending_timestamp + '</h5>' +
                                '</div>' +
                                '<div>' +
                                    '<a class="btn btn-danger" title="Delete this test batch" style="margin-right: 10px;">' +
                                        '<i class="fa fa-remove"></i>' + 
                                    '</a>' +
                                    '<a class="btn btn-danger" title="Stop this test batch" style="margin-right: 10px;">' + 
                                        '<i class="fa fa-stop"></i>' +
                                    '</a>' +
                                '</div>' +
                            '</div>'
                        ).puipanel();
            }
        });
    });
</script>
<div id="testbatchlist"></div>
{% endblock %}
